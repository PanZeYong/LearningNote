# 10 | 递归：如何用三行代码找到“最终推荐人”？

### 一、如何理解递归？

递归是一种应用非常广泛的算法（或者编程技巧）。在解决递归问题时，可以将问题进行分解，去的过程叫 "递"，回的过程叫 "归"。比如比较经典的递归问题：阶乘。

### 二、递归需要满足的三个条件

- 一个问题的解可以分解为多个子问题的解；

- 这个问题与分解后的子问题，除了数据规模不同，其解决思路完全一样；

- 存在递归终止条件。

# 三、如何编写递归代码？

- 推导出递推公式；

- 找到终止条件；

- 将递推公式和终止条件翻译成代码。

注意点：在理解递归问题时，不能一层一层地往下思考子问题与子问题、子子问题与子子问题之间的调用关系，而是只需要考虑该问题与子问题之间的调用细节，屏蔽掉更深一层的细节，这样才能避免自己陷入到思维混乱当中。

# 四、递归存在的问题

- 警惕堆栈溢出；

	- 造成堆栈溢出的原因：函数调用的时候会把临时变量往栈里压，等函数调用完之后才会出栈，并且系统栈和虚拟机栈的空间一般不是很大，如果递归的深度比较深，数据规模大，就会有大量的临时变量入栈，那么很容易造成堆栈溢出。

	- 避免出现堆栈溢出：限制递归的最大深度，但并不能解决所有问题。

- 警惕重复计算；

	- 避免出现重复计算：通过设置一个数据结构，比如散列表或者 Map 来保存计算过的值，当再次进行计算时，先检查要计算的是否存在于散列表或 Map 中，如果存在的话直接取值，跳过计算环节；否则计算并将其保存起来。

- 函数调用耗时；

- 空间复杂度高。

# 五、问题

- 尾递归

- 堆排

- 分叉递归

- 台阶问题（斐波那契数列）

- 在递归的实现中，如何检测环的存在

