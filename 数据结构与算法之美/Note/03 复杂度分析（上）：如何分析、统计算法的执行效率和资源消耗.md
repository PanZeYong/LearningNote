# 03 复杂度分析（上）：如何分析、统计算法的执行效率和资源消耗

## 一、为什么需要复杂度分析？

我们把代码在机器上跑一遍，通过统计、计算，就能得出算法执行所消耗的时间以及在内存中所占的大小，那么我们为什么还需要进行复杂度分析呢？因为这种方法有它的局限性，表现在：

- 测试结果非常依赖测试环境

- 测试结果受数据规模的影响很大

我们把这种方法称为**事后统计法**。

## 二、大 O 复杂度表示法

### (一)、大 O 时间复杂度表示法

#### 1、规律

所有代码的执行时间 T(n) 与每行代码的执行次数 n 成正比。公式如下：

```
T(n) = O(f(n))
```

- T(n)：表示代码执行的时间；

- n：表示数据规模的大小；

- f(n)：表示每行代码执行的次数总和。

- O：表示代码的执行时间 T（n）与 f(n) 表达式成正比。

大 O 时间复杂度实际上并不是表示真正的执行时间，而是表示代码执行时间随数据规模增长的变化趋势，也叫作渐进时间复杂度，简称时间复杂度。

例子：假设每行代码执行时间为：time

``` java
int call(int n) {
	int sum = 0;    // time
	int i = 1;    // time
	int j = 1;    // time
	for (; i <= n; ++i) {    // n * time
		j = 1;    // n * time
		for (; j <= n; ++j) {    // n * n * time
			sum = sum + i * j;    // n * n * time
		}
	}
}
```
这段代码执行的总时间为：$T(n) = (2 * n ^ 2 + 2 * n + 3) * time = O(n^2)$

由于大 O 时间复杂度表示法只是表示一种趋势，那么通常我们会忽略公式中的常量、低阶、系数，只需记录一个最大阶段的量级就可以。

#### 2、时间复杂度分析的方法

- 只关注循环执行次数最多的一段代码；

- 加法法则：总复杂度等于量级最大的那段代码的复杂度；

- 乘法法则：嵌套代码的复杂度等于嵌套内外代码复杂度的乘积。

#### 3、几种常见时间复杂度实例分析

- 多项式时间复杂度

	- O(1)：代码的执行时间不随 n 的增长而增长；或者说算法中不存在循环语句、递归语句，即使有成千上万行的代码，其时间复杂度也是 O(1)。

	- O(logn)、O(nlogn)

		```java
		i = 1;
		while (i <= n) {
			i = i * 2;
		}
		```
		
	- O(m+n)、O(m*n)：由两个数据的规模决定。

### （二）、空间复杂度分析

空间复杂度全称是渐进空间复杂度，表示算法的存储空间与数据规模之间的增长关系。

